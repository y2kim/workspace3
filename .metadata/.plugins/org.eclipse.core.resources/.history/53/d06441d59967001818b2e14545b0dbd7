<%@page import="java.io.FileInputStream"%>
<%@page import="java.io.File"%>
<%@page import="java.io.OutputStream"%>
<%@page import="java.io.InputStream"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body>
		<%
		//일반적으로 JSP로 만들지는 않는다  [다운로드 링크를 ]
			request.setCharacterEncoding("UTF-8");
		    String filename = request.getParameter("filename");
		    String realPath = request.getServletContext().getRealPath("files");
		    String fullPath = realPath + "/"+ filename;
		    
		    response.reset();
		    response.setContentType("application/octet-stream");
		    //out.write(fullPath) 파일로 바뀌니 리스폰을 바꾼다;
		    String encodeFileName = new String(filename.getBytes("utf8"),"8859_1");
		    response.setHeader("Content-disposition", "attachment; filename="+encodeFileName);
		    //----  여기 까지 헤더 영역 
		    
		    InputStream in = null;
		    OutputStream os = null;
		    File file =null;
		    boolean skip = false ;
		    try{ 
		    	try{
		    	file = new File(realPath,filename);
		    	in = new FileInputStream(file);
		    	}catch (Exception e1){
		    		skip =true;	
		    	}
		    			
		    }catch(Exception E){
		    }
		%>
</body>
</html>